<Group name="controller" xmlns="http://www.mbsim-env.de/MBSim">
  <frames>
  </frames>
  <contours>
  </contours>
  <groups>
  </groups>
  <objects>
  </objects>
  <links>
    <LinearTransferSystem name="pidController" xmlns="http://www.mbsim-env.de/MBSimControl">
      <inputSignal ref="../Link[speedDeviation]"/>
      <pidType>
        <P>controllerKP</P>
        <I>controllerKI</I>
        <D>0</D>
      </pidType>
      <showABCD/> <!-- optional -->
    </LinearTransferSystem>
    <GeneralizedVelocitySensor name="crankMeasuredSpeed" xmlns="http://www.mbsim-env.de/MBSimControl">
      <object ref="../../Object[Crank]"/>
      <index>0</index>
    </GeneralizedVelocitySensor>
    <FunctionSensor name="crankReferenceSpeed" xmlns="http://www.mbsim-env.de/MBSimControl">
      <function>
        <ConstantFunction xmlns="http://www.mbsim-env.de/MBSim">
          <a0>ReferenceSpeed</a0>
        </ConstantFunction>
      </function>
    </FunctionSensor>
    <BinarySignalOperation name="speedDeviation" xmlns="http://www.mbsim-env.de/MBSimControl">
      <firstInputSignal ref="../Link[crankReferenceSpeed]"/>
      <secondInputSignal ref="../Link[crankMeasuredSpeed]"/>
      <function>
       <SymbolicFunction arg1="x" arg2="y" xmlns="http://www.mbsim-env.de/MBSim">
          x-y
        </SymbolicFunction>
      </function>
    </BinarySignalOperation>
    <KineticExcitation name="motor" xmlns="http://www.mbsim-env.de/MBSim">
      <momentDirection>[0 0 1]'</momentDirection> <!-- optional -->
      <momentFunction>
        <SignalFunction xmlns="http://www.mbsim-env.de/MBSimControl">
          <returnSignal ref="../../Link[pidController]"/>
        </SignalFunction>
      </momentFunction>
      <connect ref1="../Frame[I]" ref2="../../Object[Crank]/Frame[B2]"/>
    </KineticExcitation>
  </links>
</Group>

