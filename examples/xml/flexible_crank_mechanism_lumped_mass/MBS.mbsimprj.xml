<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<MBSimProject xmlns="http://www.mbsim-env.de/MBSimXML" name="Project">

  <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
    <Parameter>
      <scalarParameter name="E" unit="-">2e11</scalarParameter>
      <scalarParameter name="nu" unit="-">0.3</scalarParameter>
      <scalarParameter name="m1" unit="-">0.36</scalarParameter>
      <scalarParameter name="J1" unit="-">0.002727</scalarParameter>
      <scalarParameter name="m3" unit="-">0.075552</scalarParameter>
      <scalarParameter name="rho" unit="-">7870</scalarParameter>
      <scalarParameter name="l1" unit="-">0.15</scalarParameter>
      <scalarParameter name="l2" unit="-">0.3</scalarParameter>
      <scalarParameter name="d2" unit="-">0.008</scalarParameter>
      <scalarParameter name="h2" unit="-">0.008</scalarParameter>
    </Parameter>
    <DynamicSystemSolver xmlns="http://www.mbsim-env.de/MBSim" name="MBS">
      <frames/>
      <contours/>
      <groups/>
      <objects>
        <RigidBody name="RigidBody1">
          <plotFeature feature="+stateDerivative"/>
          <frameForKinematics ref="Frame[K]"/>
          <mass unit="kg">m1</mass>
          <inertiaTensor unit="kg*m^2">
            <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>0</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>0</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>J1</ele>
              </row>
            </xmlMatrix>
          </inertiaTensor>
          <frameForInertiaTensor ref="Frame[K]"/>
          <stateDependentRotation>
            <RotationAboutZAxis/>
          </stateDependentRotation>
          <frames>
            <FixedRelativeFrame name="K">
              <enableOpenMBV>
                <?OPENMBV_ID 6?>
                <size unit="cm">1</size>
              </enableOpenMBV>
              <relativePosition unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>-l1/2</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </relativePosition>
            </FixedRelativeFrame>
            <FixedRelativeFrame name="Q">
              <enableOpenMBV>
                <?OPENMBV_ID 7?>
                <size unit="cm">1</size>
              </enableOpenMBV>
              <relativePosition unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>l1/2</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </relativePosition>
            </FixedRelativeFrame>
          </frames>
          <contours/>
          <openMBVRigidBody>
            <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Body1">
              <?OPENMBV_ID 2?>
              <diffuseColor unit="-">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0.333333</ele>
                  <ele>1</ele>
                  <ele>1</ele>
                </xmlVector>
              </diffuseColor>
              <transparency unit="-">0.3</transparency>
              <initialTranslation unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </initialTranslation>
              <initialRotation unit="rad">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </initialRotation>
              <scaleFactor unit="-">1</scaleFactor>
              <length unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>l1</ele>
                  <ele>h2</ele>
                  <ele>d2</ele>
                </xmlVector>
              </length>
            </Cuboid>
          </openMBVRigidBody>
          <enableOpenMBVFrameC>
            <?OPENMBV_ID 3?>
            <size unit="cm">1</size>
          </enableOpenMBVFrameC>
        </RigidBody>
        <Embed xmlns="http://www.mbsim-env.de/MBXMLUtils">
          <Parameter>
            <matrixParameter name="u0" unit="-">
              <fromFile href="u0.dat"/>
            </matrixParameter>
            <matrixParameter name="V" unit="-">
              <fromFile href="V.dat"/>
            </matrixParameter>
            <matrixParameter name="P" unit="-">
              <fromFile href="P.dat"/>
            </matrixParameter>
            <scalarParameter name="nf" unit="-">size(u0,1)</scalarParameter>
            <matrixParameter name="sigh" unit="-">
              <fromFile href="sigh.dat"/>
            </matrixParameter>
          </Parameter>
          <FlexibleBodyFFR xmlns="http://www.mbsim-env.de/MBSimFlexibleBody" name="FlexibleBodyFFR2">
            <plotFeature xmlns="http://www.mbsim-env.de/MBSim" feature="+stateDerivative"/>
            <frameOfReference xmlns="http://www.mbsim-env.de/MBSim" ref="../Object[RigidBody1]/Frame[Q]"/>
            <mass unit="kg">load('data.bin','m').m</mass>
            <positionIntegral unit="-">load('data.bin','rdm').rdm</positionIntegral>
            <positionPositionIntegral unit="kg*m^2">load('data.bin','rrdm').rrdm</positionPositionIntegral>
            <shapeFunctionIntegral unit="-">load('data.bin','Pdm').Pdm</shapeFunctionIntegral>
            <positionShapeFunctionIntegral>
              <ele unit="-">load('data.bin','rPdm').rPdm{1}
</ele>
              <ele unit="-">load('data.bin','rPdm').rPdm{2}</ele>
              <ele unit="-">load('data.bin','rPdm').rPdm{3}</ele>
            </positionShapeFunctionIntegral>
            <shapeFunctionShapeFunctionIntegral>
              <row>
                <ele unit="-">load('data.bin','PPdm').PPdm{1,1}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{1,2}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{1,3}</ele>
              </row>
              <row>
                <ele unit="-">load('data.bin','PPdm').PPdm{2,1}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{2,2}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{2,3}</ele>
              </row>
              <row>
                <ele unit="-">load('data.bin','PPdm').PPdm{3,1}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{3,2}</ele>
                <ele unit="-">load('data.bin','PPdm').PPdm{3,3}</ele>
              </row>
            </shapeFunctionShapeFunctionIntegral>
            <stiffnessMatrix unit="-">load('data.bin','Ke').Ke</stiffnessMatrix>
            <proportionalDamping unit="-">
              <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                <ele>0</ele>
                <ele>0.0001</ele>
              </xmlVector>
            </proportionalDamping>
            <relativeNodalPosition unit="-">u0'(:)</relativeNodalPosition>
            <shapeMatrixOfTranslation unit="-">V</shapeMatrixOfTranslation>
            <stressMatrix unit="-">sigh</stressMatrix>
            <stateDependentRotation>
              <RotationAboutZAxis xmlns="http://www.mbsim-env.de/MBSim"/>
            </stateDependentRotation>
            <frames>
              <FixedNodalFrame name="P">
                <plotFeature xmlns="http://www.mbsim-env.de/MBSim" feature="+globalPosition"/>
                <enableOpenMBV xmlns="http://www.mbsim-env.de/MBSim">
                  <?OPENMBV_ID 15?>
                  <size unit="cm">1</size>
                </enableOpenMBV>
                <relativePosition unit="m">n=1823
u0(n,:)'</relativePosition>
                <shapeMatrixOfTranslation unit="-">n=1823
V(3*(n-1)+1:3*(n-1)+3,:)</shapeMatrixOfTranslation>
                <shapeMatrixOfRotation unit="-">n=1823
P(3*(n-1)+1:3*(n-1)+3,:)</shapeMatrixOfRotation>
              </FixedNodalFrame>
              <FixedNodalFrame name="Q">
                <plotFeature xmlns="http://www.mbsim-env.de/MBSim" feature="+globalPosition"/>
                <enableOpenMBV xmlns="http://www.mbsim-env.de/MBSim">
                  <?OPENMBV_ID 16?>
                  <size unit="cm">1</size>
                </enableOpenMBV>
                <relativePosition unit="m">n=1822
u0(n,:)'</relativePosition>
                <shapeMatrixOfTranslation unit="-">n=1822
V(3*(n-1)+1:3*(n-1)+3,:)</shapeMatrixOfTranslation>
                <shapeMatrixOfRotation unit="-">n=1822
P(3*(n-1)+1:3*(n-1)+3,:)</shapeMatrixOfRotation>
              </FixedNodalFrame>
            </frames>
            <contours/>
            <enableOpenMBV>
              <nodes>
                <fromFile xmlns="http://www.mbsim-env.de/MBXMLUtils" href="nodes.dat"/>
              </nodes>
              <indices>
                <fromFile xmlns="http://www.mbsim-env.de/MBXMLUtils" href="indices.dat"/>
              </indices>
              <minimalColorValue>1e4</minimalColorValue>
              <maximalColorValue>1e6</maximalColorValue>
            </enableOpenMBV>
            <enableOpenMBVFrameK>
              <?OPENMBV_ID 11?>
              <size xmlns="http://www.mbsim-env.de/MBSim" unit="cm">1</size>
            </enableOpenMBVFrameK>
          </FlexibleBodyFFR>
        </Embed>
        <RigidBody name="RigidBody3">
          <plotFeature feature="+stateDerivative"/>
          <generalizedInitialPosition>
            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <ele>l1+l2</ele>
            </xmlVector>
          </generalizedInitialPosition>
          <mass unit="kg">m3</mass>
          <inertiaTensor unit="kg*m^2">
            <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>0</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>0</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>0</ele>
                <ele>J1</ele>
              </row>
            </xmlMatrix>
          </inertiaTensor>
          <stateDependentTranslation>
            <TranslationAlongXAxis/>
          </stateDependentTranslation>
          <frames/>
          <contours/>
          <openMBVRigidBody>
            <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Body1">
              <?OPENMBV_ID 19?>
              <diffuseColor unit="-">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0.166667</ele>
                  <ele>1</ele>
                  <ele>1</ele>
                </xmlVector>
              </diffuseColor>
              <transparency unit="-">0.3</transparency>
              <initialTranslation unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </initialTranslation>
              <initialRotation unit="rad">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>0</ele>
                  <ele>0</ele>
                  <ele>0</ele>
                </xmlVector>
              </initialRotation>
              <scaleFactor unit="-">1</scaleFactor>
              <length unit="m">
                <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                  <ele>l2/8</ele>
                  <ele>h2*4</ele>
                  <ele>d2*4</ele>
                </xmlVector>
              </length>
            </Cuboid>
          </openMBVRigidBody>
          <enableOpenMBVFrameC>
            <?OPENMBV_ID 20?>
            <size unit="cm">1</size>
          </enableOpenMBVFrameC>
        </RigidBody>
      </objects>
      <links>
        <Joint name="Joint1">
          <connect ref1="../Object[RigidBody3]/Frame[C]" ref2="../Object[FlexibleBodyFFR2]/Frame[Q]"/>
          <forceDirection unit="-">
            <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <row>
                <ele>1</ele>
                <ele>0</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>1</ele>
              </row>
              <row>
                <ele>0</ele>
                <ele>0</ele>
              </row>
            </xmlMatrix>
          </forceDirection>
          <forceLaw>
            <BilateralConstraint/>
          </forceLaw>
        </Joint>
      </links>
      <enableOpenMBVFrameI>
        <?OPENMBV_ID 1?>
        <size unit="cm">1</size>
      </enableOpenMBVFrameI>
      <environments>
        <MBSimEnvironment>
          <accelerationOfGravity unit="m/s^2">
            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <ele>0</ele>
              <ele>-9.81</ele>
              <ele>0</ele>
            </xmlVector>
          </accelerationOfGravity>
        </MBSimEnvironment>
      </environments>
    </DynamicSystemSolver>
  </Embed>

  <LSODEIntegrator xmlns="http://www.mbsim-env.de/MBSimIntegrator">
    <startTime unit="s">0</startTime>
    <endTime unit="s">1</endTime>
    <plotStepSize unit="s">1e-2</plotStepSize>
    <absoluteToleranceScalar>1e-6</absoluteToleranceScalar>
    <relativeToleranceScalar unit="-">1e-6</relativeToleranceScalar>
    <initialStepSize unit="s">0</initialStepSize>
    <maximalStepSize unit="s">0</maximalStepSize>
    <minimalStepSize unit="s">0</minimalStepSize>
    <numberOfMaximalSteps>0</numberOfMaximalSteps>
    <stiffModus>1</stiffModus>
  </LSODEIntegrator>

</MBSimProject>
